(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/oea-weather/components/oea-weather/oea-weather"],{"074e":function(t,e,a){"use strict";a.r(e);var o=a("fd51"),i=a("0c3d");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("d1a1");var d=a("f0c5"),c=Object(d["a"])(i["default"],o["b"],o["c"],!1,null,"1f1c5e92",null,!1,o["a"],void 0);e["default"]=c.exports},"0c3d":function(t,e,a){"use strict";a.r(e);var o=a("19e8"),i=a.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},"19e8":function(t,e,a){"use strict";(function(t){var o=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(a("7037")),n=o(a("4b34")),d={name:"oea-weather",data:function(){return{data:n.default,city_adcode:this.adcode,province:"",city:"",reporttime:"",today:{data:[["温度","湿度","风向","风力"],[]]},today_weather:null,casts:[null,null,null,null]}},props:{debug:{type:Boolean,default:!1},title:{type:String,default:"高德天气API接口"},custom:{type:Boolean,default:!1},card:{type:Boolean,default:!0},ip:{type:String,default:"auto"},default_adcode:{type:String,default:""},adcode:{type:String,default:""},gd_weather_api_url:{type:String,default:"https://restapi.amap.com/v3/weather/weatherInfo"},gd_ip_api_url:{type:String,default:"https://restapi.amap.com/v3/ip"},gd_key:{type:String,default:""},citySwitch_icon:{type:String,default:"ui-reply"},update_icon:{type:String,default:"ui-rotation"}},watch:{city_adcode:function(){this.all_update()},casts:function(){this.$emit("forecasts",this.casts)},today_weather:function(){this.$emit("todayWeather",this.today_weather)}},emits:["forecasts","todayWeather","citySwitch"],mounted:function(){""!=this.city_adcode&&this.all_update(),this.ipToAdcode()},methods:{log:function(t){console.log(t)},adcodeChange:function(t){this.city_adcode=t},citySwitchBtn:function(){this.$refs.popup.open("center"),this.$emit("citySwitch")},updateBtn:function(){this.all_update(),this.showToast("刷新成功")},all_update:function(){this.city_adcode||this.ipToAdcode(),this.update("base"),this.update("all")},windScaleToIcon:function(t){return"≤3"!=t?"wind-scale-"+t:"wind-waves"},nToN:function(t){var e;switch(t){case"1":e="一";break;case"2":e="二";break;case"3":e="三";break;case"4":e="四";break;case"5":e="五";break;case"6":e="六";break;case"7":e="日";break}return e},ipToAdcode:function(){var e=this;if(""!=this.default_adcode&&""==this.city_adcode&&(this.city_adcode=this.default_adcode),""==this.city_adcode&&this.check("key")){var a={};a.key=this.gd_key,"127.0.0.1"!=this.ip&&""!=this.ip&&"auto"!=this.ip&&(a.ip=this.ip),this.debug&&console.log({name:"uni.request",data:a}),t.request({url:this.gd_ip_api_url,data:a,success:function(t){e.debug&&console.log(t.data),e.check("obj",t.data)?e.check("state",t.data)&&(e.check("adcode",t.data)?e.city_adcode=t.data.adcode:e.city_adcode="110000"):e.showToast("请检查url接口是否正确")},fail:function(t){e.showToast("网络问题"),console.log(t)}})}},update:function(e){var a=this;this.debug&&console.log({key:this.gd_key,city:this.city_adcode,extensions:e,output:"JSON"}),this.check("key")&&t.request({url:this.gd_weather_api_url,data:{key:this.gd_key,city:this.city_adcode,extensions:e,output:"JSON"},success:function(t){a.debug&&console.log(t.data),a.check("obj",t.data)?a.check("state",t.data)&&("base"==e&&(a.today_weather=t.data.lives[0],a.city=t.data.lives[0].city,a.province=t.data.lives[0].province,a.reporttime=t.data.lives[0].reporttime,a.today.data[1][0]=t.data.lives[0].temperature,a.today.data[1][1]=t.data.lives[0].humidity,a.today.data[1][2]=t.data.lives[0].winddirection,a.today.data[1][3]=t.data.lives[0].windpower,a.today.weather=t.data.lives[0].weather),"all"==e&&(a.city=t.data.forecasts[0].city,a.province=t.data.forecasts[0].province,a.reporttime=t.data.forecasts[0].reporttime,a.casts=t.data.forecasts[0].casts)):a.showToast("请检查url接口是否正确")},fail:function(t){a.showToast("网络问题"),console.log(t)}})},check:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(t){case"key":if(""==this.gd_key)return this.showToast("请输入 key"),!1;break;case"state":if("1"!=e.status)return this.debug&&console.log(e),this.showToast("错误的服务器返回值:"+e.info),!1;break;case"adcode":if(e){if("string"!=typeof e.adcode)return this.debug&&console.log(e),"局域网"==e.province?this.showToast("局域网 IP"):this.showToast("获取位置失败..."),!1}else{if(""==this.adcode)return this.showToast("请输入城市编码"),!1;if("string"!=typeof this.adcode)return this.showToast("获取位置失败"),!1}break;case"obj":if("object"!=(0,i.default)(e))return!1;break}return!0},showToast:function(e){t.showToast({icon:"none",title:e})}}};e.default=d}).call(this,a("543d")["default"])},d1a1:function(t,e,a){"use strict";var o=a("ea14"),i=a.n(o);i.a},ea14:function(t,e,a){},fd51:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var o={oeaIcon:function(){return a.e("uni_modules/oea-icon/components/oea-icon/oea-icon").then(a.bind(null,"5445"))},oeaSeparate:function(){return a.e("uni_modules/oea-separate/components/oea-separate/oea-separate").then(a.bind(null,"574b"))},oeaGrid:function(){return a.e("uni_modules/oea-grid/components/oea-grid/oea-grid").then(a.bind(null,"6bf2"))},oeaGridItem:function(){return a.e("uni_modules/oea-grid/components/oea-grid-item/oea-grid-item").then(a.bind(null,"0a18"))},uniPopup:function(){return a.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(a.bind(null,"de8a"))},uniPopupDialog:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(a.bind(null,"87a1"))},uniDataPicker:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uni-data-picker/components/uni-data-picker/uni-data-picker")]).then(a.bind(null,"a84f"))}},i=function(){var t=this,e=t.$createElement,a=(t._self._c,t.custom?null:t.__map(t.today.data[0],(function(e,a){var o=t.__get_orig(e),i=3==a&&"≤3"!=t.today.data[1][a]?t.windScaleToIcon(t.today.data[1][a]):null;return{$orig:o,m0:i}})));t.$mp.data=Object.assign({},{$root:{l0:a}})},n=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/oea-weather/components/oea-weather/oea-weather-create-component',
    {
        'uni_modules/oea-weather/components/oea-weather/oea-weather-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("074e"))
        })
    },
    [['uni_modules/oea-weather/components/oea-weather/oea-weather-create-component']]
]);
